<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Random Quote Generator</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <main>
    <div class="container">
        <div id="posterror" class="alert alert-danger alert-dismisable fade" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
          <p></p>
        </div>
        <div id="postsuccess" class="alert alert-success alert-dismisable fade" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
          <p></p>
        </div>
      <div class="jumbotron">
        <h1 class="display-3">Random Design Quotes</h1>
        <p class="lead">This is a simple machine that will give a you a random quote to inspire you.</p>
        <hr class="my-4">
        <p>Press the button below and find out the words of wisdom</p>
        <p class="lead">
          <a class="btn btn-primary btn-lg" href="#" id="getQuote" role="button"><span id="animateIt" class=""></span> <span class="cta-text">Get Inspired</span></a>
        </p>
        <div class="dividing-space"></div>
        
        <div id="quotes">
          <div class="quote-container">
        <span class="icon"><i class="fa fa-quote-left fa-5x" aria-hidden="true"></i></span>
      </div>
      <div class="card">
    <div class="card-body"></div>
    <div>
      <a id="tweetBtn" class="fa fa-twitter-square fa-3x"
  href="https://twitter.com/intent/tweet?text=Hello%20world"
  data-size="large">
</a>
    </div>
  </div>
      <div class="quote-container pull-right">
        <span class="icon"><i class="fa fa-quote-right fa-5x" aria-hidden="true"></i></span>
      </div>
      </div>
      <div class="dividing-space"></div>
<div class="dividing-space"></div>
    </div>
        </div>


<div class="dividing-space"></div>
<div class="dividing-space"></div>
  </main>
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">

        </div>
      </div>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
<script src="https://use.fontawesome.com/8a763ab5b5.js"></script>

  <script type="text/javascript">
  $(document).ready(function(){

    var $card = $('.card-body');
    var count = 0;
    var successShowm = false;


    $('#getQuote').on('click', function(event) {
      count++;
     // event.preventDefault();

      $('#quotes').css({
        'display':'block'
      });

      $.ajax({
      type: 'GET',
      url: '//quotesondesign.com/wp-json/posts?filter[orderby]=rand&filter[posts_per_page]=1&callback=',
      crossDomain: true,
      dataType: 'json',
      contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
      success: function(data) {
        if (!successShowm) {
          $('#postsuccess').addClass('show');
          $('#postsuccess p').html('It Worked! :-)');
          successShowm = true;
        }
        
        if (count == 1) {
              $card.html(data[0].content + '<p class="quote-text">— ' + data[0].title + "</p>");
        } else if (count > 1 ) {
          $card.html('');
          $card.html(data[0].content + '<p class="quote-text">— ' + data[0].title + "</p>");
        }

          var arr = data[0].content;
          var corrected = arr.replace(/(<p>|<\/p>)/g,'');
        $('a#tweetBtn').attr({
          href: 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(corrected)
        });
      },
      error: function(jqXHR, exception) {
        var msg = '';
        
        if (jqXHR === 0) {
         msg = ' Not connected \n Verify Network.';
        } else if (jqXHR === 404) {
          msg = 'Page not found [404]';
        } else if (jqXHR === 500) {
          msg = ' Internal Server Error';
        } else if (exception === 'parsererror' ) {
          msg = 'Requested JSON parse failed';
        } else if (exception === 'timeout') {
          msg = 'Timeout error';
        } else if(exception === 'abort') {
          msg = 'Ajax aborted';
        } else {
          msg = ' Unknown error ' + jqXHR.responseText;
        }; 
        $('#posterror').addClass('show');
        $('#posterror p').html(msg);
      }
    });

    });
  })
  </script>
</body>

</html>
